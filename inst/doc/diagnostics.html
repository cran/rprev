<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="S J Lax and S E Lacy" />

<meta name="date" content="2019-03-12" />

<title>Diagnostics for rprev</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Diagnostics for rprev</h1>
<h4 class="author"><em>S J Lax and S E Lacy</em></h4>
<h4 class="date"><em>2019-03-12</em></h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The <a href="user_guide.html">user guide</a> highlighted the basic use of the prevalence simulation methodology, demonstrating that the prevalence process is a result of two distinct processes: incidence and survival. <code>rprev</code> allows for custom specification of both of these systems, in addition to providing default implementations that work well in many situations. This vignette acts as a guide to assessing the modelling assumptions made when using these default models, including the use of diagnostic functions provided with <code>rprev</code>.</p>
<p>First, we will inspect the consistency of incidence data across the range of the registry and determine if it can be appropriately modelled as an homogeneous Poisson process. Second, we will look at verifying assumptions made when using a parametric model of survival. We emphasize that <strong>the user should check that their registry data does meet the required assumptions and if not, should understand that estimates of prevalence made using simulation based on that data may not be correct</strong>.</p>
</div>
<div id="incidence" class="section level1">
<h1>Incidence</h1>
<p>The simulation of incident cases in the years for which registry data is not available currently assumes that the incidence process is homogeneous Poisson. <code>test_homogeneity</code> calculates several summary statistics of the disease incidence to identify the suitability of this model, including fitting a smoothed function to the annual incidence data.</p>
<p>It requires a vector of entry dates into the registry, with other information about the registry being passed in to optional arguments (see <code>?test_homogeneity</code> for details). For example, the <code>population_size</code> parameter below allows for relative incidence rates to be calculated, while <code>truncate_end</code> removes diagnoses from the last calendar year of the registry (2013) as it only has 1 month of incidence data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inc &lt;-<span class="st"> </span><span class="kw">test_homogeneity</span>(prevsim<span class="op">$</span>entrydate,
                        <span class="dt">population_size=</span><span class="fl">3.2e6</span>,
                        <span class="dt">truncate_end=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>The <code>summary</code> method displays the most useful information about the incidence process of the disease of interest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(inc)</code></pre></div>
<pre><code>## Number of years of registry data: 10 
## 
## Incidence
## ~~~~~~~~~
## Known incidence by year: 91 107 96 98 88 88 100 107 108 111 
## Diagnoses (time since registry began):
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     0.0   921.5  1894.0  1866.1  2824.8  3640.0 
## p-values for over/under dispersion: 0.66473 0.33527 
## 
## Fitted smooth:
## ~~~~~~~~~~~~~
## Call:
## smooth.spline(x = diags, y = seq_along(diags), df = df)
## 
## Smoothing Parameter  spar= 1.127494  lambda= 0.1929953 (13 iterations)
## Equivalent Degrees of Freedom (Df): 4.00047
## Penalized Criterion (RSS): 24898.51
## GCV: 25.33735</code></pre>
<p>The known yearly incidence rates are displayed starting at the the day and month specified in <code>year_start</code>, which defaults to “01-01”, in the first registry year. This is 2013-01-01 for <code>prevsim</code>, so there were 91 incident cases between 2003-01-01 and 2004-01-01. It can be concluded that the disease has around 100 new cases each year.</p>
<p>Below that is a summary of the cumulative diagnosis times (in days), useful as a quick check of the distribution of incident cases. The p-values of a simulation test indicating whether the yearly incidence estimates are under or over dispersed relative to a homogeneous Poisson process are also displayed. Inspection of the smoothed incidence function should reveal whether the problem is one of non-homogeneity (which may lead to inaccurate prevalence estimates) or of failure of the Poisson assumption (which may lead to inaccurate estimates of confidence intervals). Another useful incidence statistic is the mean annual incidence rate per 100,000 within the study population, which is obtained from the <code>mean</code> attribute. Confidence intervals are provided at the specified level (default is 95%):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inc<span class="op">$</span>mean</code></pre></div>
<pre><code>## $absolute
## [1] 99.4
## 
## $per100K
## [1] 3.11
## 
## $per100K.lower
## [1] 3.05
## 
## $per100K.upper
## [1] 3.17</code></pre>
<p>Alongside the p-values from the over/under dispersion test, <code>rprev</code> provides visual tools to assess the consistency of the incidence data with an homogeneous Poisson process.</p>
<p>The <code>plot</code> method displays a plot of the actual incidence rate as recorded in the registry, with the smooth overlaid. If incidence is an homogeneous Poisson process, both the smooth (green) and incidence process (red) should remain within the 95% confidence interval (dashed blue) and be evenly distributed about the mean (blue line).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(inc)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Another useful diagnostic is to look at the age distribution of the incident cases.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(prevsim, <span class="kw">aes</span>(age, <span class="dt">y=</span>..count..)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">'density'</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">xlim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">'Age (years)'</span>, <span class="dt">y=</span><span class="st">'Number incident cases'</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="survival-modelling" class="section level1">
<h1>Survival modelling</h1>
<p>In the default implementation, survival is modelled using a parametric fit with a specified distribution. It is <strong>highly</strong> recommended that the user inspects this model to assess its suitability. In this example, we’ll use the <code>prevsim</code> data set and test the assumptions of a Weibull model acting on the sex and age covariates, since these are common demographic factors that are likely to be used in prevalence estimation.</p>
<p>First, it is always useful to plot the Kaplan-Meier estimator of the data, both as a whole and stratified by age to visually inspect for any inconsistencies:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">km &lt;-<span class="st"> </span><span class="kw">survfit</span>(<span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data=</span>prevsim)
<span class="kw">plot</span>(km, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Overall Survival&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Days&quot;</span>, 
     <span class="dt">ylab=</span><span class="st">&quot;Survival probability&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ages =<span class="st"> </span><span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">65</span>, <span class="dv">75</span>, <span class="dv">85</span>, <span class="dv">100</span>)
km2 &lt;-<span class="st"> </span><span class="kw">survfit</span>(<span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span><span class="kw">cut</span>(age, <span class="dt">breaks=</span>ages), <span class="dt">data=</span>prevsim)
<span class="kw">plot</span>(km2, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(ages), <span class="dt">main=</span><span class="st">&quot;Survival stratified by age&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Days&quot;</span>, 
     <span class="dt">ylab=</span><span class="st">&quot;Survival probability&quot;</span>)
<span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="dt">legend=</span><span class="kw">substring</span>(<span class="kw">names</span>(km2<span class="op">$</span>strata), <span class="dv">25</span>, <span class="dv">32</span>), <span class="dt">lty =</span> <span class="dv">1</span>, 
       <span class="dt">col=</span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(ages))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>It is also a useful diagnostic aid to plot the survival curve for each year of the registry to determine whether there is any inhomogeneity:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(km, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">mark.time=</span>F, <span class="dt">conf.int=</span>T, <span class="dt">xlab=</span><span class="st">&quot;Days&quot;</span>, 
     <span class="dt">ylab=</span><span class="st">&quot;Survival probability&quot;</span>)
num_reg_years &lt;-<span class="st"> </span><span class="dv">9</span>
registry_years &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">9</span>, <span class="cf">function</span>(x) <span class="kw">as.Date</span>(<span class="kw">paste0</span>(<span class="dv">2004</span><span class="op">+</span>x, <span class="st">&quot;-01-30&quot;</span>)))
<span class="kw">sapply</span>(<span class="kw">seq</span>(num_reg_years),
       <span class="cf">function</span>(i) <span class="kw">lines</span>(<span class="kw">survfit</span>(<span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, 
                                 <span class="dt">data=</span>prevsim[prevsim<span class="op">$</span>entrydate <span class="op">&gt;=</span><span class="st"> </span>
<span class="st">                                                          </span>registry_years[i] <span class="op">&amp;</span><span class="st"> </span>
<span class="st">                                                          </span>prevsim<span class="op">$</span>entrydate <span class="op">&lt;</span><span class="st"> </span>
<span class="st">                                                          </span>registry_years[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>], ]), 
                         <span class="dt">mark.time =</span> F, <span class="dt">conf.int =</span> F))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The effect of age on hazard can be visualized to determine if there are any non-proportional effects, by inspecting Schoenfeld residuals from a Cox model. This is easily done using the <code>cox.zph</code> function from the <code>survival</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cx &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span>age, <span class="dt">data=</span>prevsim)
cxp &lt;-<span class="st"> </span><span class="kw">survfit</span>(cx, 
               <span class="dt">newdata=</span><span class="kw">data.frame</span>(<span class="dt">age=</span><span class="kw">sapply</span>(<span class="kw">seq</span>(<span class="kw">length</span>(ages) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>), 
                                             <span class="cf">function</span>(i) <span class="kw">mean</span>(<span class="kw">c</span>(ages[i], ages[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]))))) 
<span class="kw">plot</span>(<span class="kw">cox.zph</span>(cx))
<span class="kw">lines</span>(cxp, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(ages), <span class="dt">lty=</span><span class="dv">2</span>, <span class="dt">mark.time=</span>F)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>An overall test of the proportional hazards assumption may be made.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cox.zph</span>(cx)</code></pre></div>
<pre><code>##         rho  chisq     p
## age -0.0106 0.0647 0.799</code></pre>
<div id="functional-form-of-age" class="section level2">
<h2>Functional form of age</h2>
<p>The standard standard assumption in a survival model is that continuous variables have a linear relationship with log-hazard. When looking at the impact of age on disease survival, we highly recommend investigating whether a non-linear functional form provides a more appropriate fit. In particular, the <code>rms</code> package provides the <code>cph</code> function to fit a Cox model, to which restricted cubic splines can be placed on covariates using <code>rcs</code> as demonstrated below. Plotting log hazard as a function of age provides a visual means of assessing model fit, to be used alongside inspection of the model coefficients.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rms)
<span class="kw">library</span>(dplyr)

mod_spline &lt;-<span class="st"> </span><span class="kw">cph</span>(<span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span><span class="kw">rcs</span>(age, <span class="dt">df=</span><span class="dv">4</span>), prevsim, <span class="dt">x=</span><span class="ot">TRUE</span>, <span class="dt">y=</span><span class="ot">TRUE</span>, <span class="dt">surv=</span><span class="ot">TRUE</span>, <span class="dt">time.inc=</span><span class="dv">1</span>)

<span class="co"># Calculates log hazard linear predictor at 100 linearly separated ages between the limits</span>
<span class="co"># in the registr data</span>
age_range &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(prevsim<span class="op">$</span>age), <span class="kw">max</span>(prevsim<span class="op">$</span>age), <span class="dt">length.out=</span><span class="dv">100</span>)
preds &lt;-<span class="st"> </span><span class="kw">predict</span>(mod_spline, <span class="dt">newdata=</span>age_range, <span class="dt">se.fit=</span>T)
preds_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(preds) <span class="op">%&gt;%</span>
<span class="st">                </span><span class="kw">rename</span>(<span class="dt">lp=</span>linear.predictors, <span class="dt">se=</span>se.fit) <span class="op">%&gt;%</span>
<span class="st">                </span><span class="kw">mutate</span>(<span class="dt">age =</span> age_range,
                       <span class="dt">upper =</span> lp <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>se,
                       <span class="dt">lower =</span> lp <span class="op">-</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>se)

<span class="kw">ggplot</span>(preds_df, <span class="kw">aes</span>(<span class="dt">x=</span>age, <span class="dt">y=</span>lp)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin=</span>lower, <span class="dt">ymax=</span>upper),
                     <span class="dt">colour=</span><span class="st">'#d2d2d2'</span>, <span class="dt">alpha=</span><span class="fl">0.30</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">colour=</span><span class="st">'#0080ff'</span>, <span class="dt">size=</span><span class="fl">1.2</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">'Age'</span>, <span class="dt">y=</span><span class="st">'Log relative hazard'</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>For example, in this situation there isn’t enough evidence to suggest a non-linear effect provides a better model fit over a linear relationship.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod_spline</code></pre></div>
<pre><code>## Cox Proportional Hazards Model
##  
##  cph(formula = Surv(time, status) ~ rcs(age, df = 4), data = prevsim, 
##      x = TRUE, y = TRUE, surv = TRUE, time.inc = 1)
##  
##                      Model Tests       Discrimination    
##                                           Indexes        
##  Obs      1000    LR chi2     31.45    R2       0.031    
##  Events    558    d.f.            4    Dxy      0.145    
##  Center 2.8919    Pr(&gt; chi2) 0.0000    g        0.259    
##                   Score chi2  32.52    gr       1.296    
##                   Pr(&gt; chi2) 0.0000                      
##  
##         Coef    S.E.   Wald Z Pr(&gt;|Z|)
##  age     0.0513 0.0246  2.09  0.0370  
##  age'   -0.1745 0.1128 -1.55  0.1221  
##  age''   0.9259 0.6024  1.54  0.1242  
##  age''' -1.2260 0.8784 -1.40  0.1628  
## </code></pre>
</div>
</div>
<div id="prevalence-estimates" class="section level1">
<h1>Prevalence estimates</h1>
<p>As a reminder, prevalence is estimated using incidence and survival data from <em>n</em> years. However, registry data (and thus known incidence and survival) data may only be known for <em>r</em> years, where <em>r</em> &lt;= <em>n</em>. If <em>r</em> &lt; <em>n</em>, the remaining <em>n</em>-<em>r</em> years of incidence and survival are simulated using Monte Carlo techniques. If the incidence and survival models are well specified then the prevalence estimates should be reliable, however, it is beneficial to check the performance of these bootstrapped models (their variance in particular) before drawing any conclusions from the results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prevalence_total &lt;-<span class="st"> </span><span class="kw">prevalence</span>(<span class="dt">index=</span><span class="st">'2013-01-30'</span>, 
                               <span class="dt">num_years_to_estimate=</span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">20</span>), 
                               <span class="dt">data=</span>prevsim, 
                               <span class="dt">inc_formula =</span> entrydate <span class="op">~</span><span class="st"> </span>sex,
                               <span class="dt">surv_formula =</span> <span class="kw">Surv</span>(time, status) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, 
                               <span class="dt">dist=</span><span class="st">'weibull'</span>, 
                               <span class="dt">population_size =</span> <span class="fl">1e6</span>,
                               <span class="dt">death_column =</span> <span class="st">'eventdate'</span>)</code></pre></div>
<div id="comparison-between-simulated-and-counted-prevalence" class="section level2">
<h2>Comparison between simulated and counted prevalence</h2>
<p>As a test of whether the model is predicting reasonable values of prevalence, we can use the fact that we can directly measure the discrepancy between the predicted and actual prevalence for the available registry years. This difference can be formally tested with an exact Poisson test of the counted prevalence from both the simulated estimate and the known registry value; the resulting p-value resulting is returned as an attribute of a <code>prevalence</code> object, called <code>pval</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prevalence_total<span class="op">$</span>pval</code></pre></div>
<pre><code>## [1] 0.5087715</code></pre>
<p>For this model, there is no evidence to reject the null hypothesis.</p>
<p>This can also be calculated manually with the <code>test_prevalence_fit</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_prevalence_fit</span>(prevalence_total)</code></pre></div>
<pre><code>## [1] 0.5087715</code></pre>
</div>
<div id="diagnosing-incidence-models" class="section level2">
<h2>Diagnosing incidence models</h2>
<p>We do not provide any functions for diagnosing the bootstrapped incidence models, however, all the objects are available in the <code>inc_models</code> attribute of the returned <code>prevalence</code> object and can be used to check for any errors in fitting. If the default homogeneous Poisson process model is being used then the techniques described earlier can be applied.</p>
</div>
<div id="diagnosing-survival-models" class="section level2">
<h2>Diagnosing survival models</h2>
<p>To inspect the distribution of the bootstrapped survival models <span class="citation">(see Crouch et al. 2014 for details)</span>, a <code>survfit.prev</code> object can be constructed using the usual <code>survfit</code> call, accepting a data frame of new data, defaulting to the average covariate values in the registry data. In the example below, survival probability is estimated for a 60 year old male:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prevsurv &lt;-<span class="st"> </span><span class="kw">survfit</span>(prevalence_total, <span class="dt">newdata=</span><span class="kw">data.frame</span>(<span class="dt">age=</span><span class="dv">60</span>, <span class="dt">sex=</span><span class="st">'M'</span>))
prevsurv</code></pre></div>
<pre><code>## Survival probability calculated at 4444 timepoints, across 1000 bootstraps.</code></pre>
<p>The <code>summary</code> method provides <em>N</em>-year survival probabilities, with <em>N</em> specified as an argument vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(prevsurv, <span class="dt">years=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>))</code></pre></div>
<pre><code>## Survival probability estimated using 1000 bootstrap survival curves:
## 1 year survival: 0.716 (0.683 - 0.746) 
## 3 year survival: 0.551 (0.508 - 0.59) 
## 5 year survival: 0.459 (0.412 - 0.502) 
## 10 year survival: 0.326 (0.277 - 0.372)</code></pre>
<p>Plotting this object displays the survival curve of a Weibull model using the original data set (orange), along with a 95% confidence band derived using the bootstrapped models. This plot is useful to assess the variability of the survival models. Further manual inspection can be carried out by looking at the objects themselves, saved in the <code>surv_models</code> attribute of the <code>prevalence</code> object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(prevsurv)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="simulated-population" class="section level2">
<h2>Simulated population</h2>
<p>The <code>simulated</code> attribute of the <code>prevalence</code> object holds a <code>data.table</code> with the incident population from every simulation, along with derived fields indicating whether they contributed to prevalence at the index date of any years of interest. It can be used as an overall check of the appropriateness of the generated incidence population, as well as identifying any discrepancies in the survival modelling.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(prevalence_total<span class="op">$</span>simulated))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">sim</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="left">incident_date</th>
<th align="right">alive_at_index</th>
<th align="right">prev_3yr</th>
<th align="right">prev_5yr</th>
<th align="right">prev_10yr</th>
<th align="right">prev_20yr</th>
<th align="right">prev_registry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">71.96575</td>
<td align="left">1993-02-03</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">49.98995</td>
<td align="left">1993-02-03</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">75.26040</td>
<td align="left">1993-02-16</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">75.29573</td>
<td align="left">1993-03-10</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">61.02602</td>
<td align="left">1993-03-22</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="right">70.35218</td>
<td align="left">1993-03-27</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-crouch2014determining">
<p>Crouch, Simon, Alex Smith, Dan Painter, Jinlei Li, and Eve Roman. 2014. “Determining Disease Prevalence from Incidence and Survival Using Simulation Techniques.” <em>Cancer Epidemiology</em> 38 (2). Elsevier: 193–99. <a href="http://www.ncbi.nlm.nih.gov/pubmed/24656754" class="uri">http://www.ncbi.nlm.nih.gov/pubmed/24656754</a>.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
